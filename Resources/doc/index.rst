Бандл для проверки авторизации на сервисе авторизации youtool.
============================================================

Бандл реализует guard для проверки токена авторизации. Предназначен в первую очередь для тех сервисов, которые хотят использовать авторизацию через сервис авторизации youtool.



Установка.
----------

Бандл устанавливается с помощью composer и следует стандартной структуре, поэтому на symfony >= 4.2 устанавливается полностью автоматически.

Для установки бандла добавьте репозиторий с бандлом в ваш composer.json:

.. code-block:: json

    "repositories": [
        {
            "type": "git",
            "url": "https://git.crtweb.ru/youtool/bundle-check-auth"
        }
    ]

А, затем, используйте команду:

.. code-block:: bash

    $ composer require youtool/bundle-check-auth

В случае, если у вас нет сертификата для доступа к указанному репозиторию, следует запросить его у владельца репозитория.



Настройка.
----------

Для бандла доступно несколько параметров для настройки:

    * expired_timeout - время в секундах, которое должно оставаться до истечения токена, чтобы считать его валидным, используется для учета лага на сетевой запрос,

    * required_scopes - массив разрешений, которые в обязательном порядке должен содержать токен,

    * public_key_path - абсолютный путь к файлу с открытым ключом сервиса авторизации для проверки подписи токена,

    * base_url - базовая ссылка на токен авторизации.

Если необходимо добавить какой-либо дополнительный валидатор, то нужно объявить сервис тегом youtool_auth.token.validator, который будет реализовывать YouTool\AuthBundle\Jwt\Validator\ValidatorInterface.
